cases:
  - label: Returns a JSON result
    request:
      path: /json
      query:
        key: value
        multi-key:
          - value1
          - value2
    response:
      status_code: 200
      body:
        - describe: .not_existing_key
          it_should: be_null
        - describe: .empty_string
          it_should: be_empty
        - describe: .empty_list
          it_should: be_empty
        - describe: .foo
          it_should:
            - not_be_null
            - not: be_empty
            - be: bar
            - be:
                not: baz
            - be:
                not:
                  contain_string: x
            - equal: bar
            - have_length: 3
            - contain_string: a
            - start_with: ba
            - end_with: ar
            - match_regexp: ^b.r$
        - describe: .list
          it_should:
            - not:
                have_item: ''
            - have_item: 1

  - label: Returns a failure result
    request:
      path: /error/404
    response:
      status_code:
        - equal: 404
        - be_greater_than: 399
        - be_greater_than_or_equal_to: 400
        - be_less_than_or_equal_to: 499
        - be_less_than: 500

  - label: No description doesn't cause error
    request:
      path: /json
    response:
      body:
        - describe: .foo

  - label: No validations for text doesn't fail
    request:
      path: /text
